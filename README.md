# malloc

C++で実装したカスタムメモリアロケータ（malloc/free/calloc/realloc）

## 概要

このプロジェクトは、C++で標準ライブラリの`malloc`関数を独自に実装したものです。基本的なメモリ管理機能を提供します。

## 機能

- **my_malloc(size_t size)**: メモリを割り当てる
- **my_free(void* ptr)**: メモリを解放する
- **my_calloc(size_t num, size_t size)**: ゼロ初期化されたメモリを割り当てる
- **my_realloc(void* ptr, size_t new_size)**: メモリサイズを変更する
- **print_memory_blocks()**: デバッグ用にメモリブロックの状態を表示

## 実装の特徴

- **First Fit戦略**: 最初に見つかった適切なサイズの空きブロックを使用
- **ブロック分割**: 大きすぎるブロックは分割して効率的に使用
- **ブロック結合**: 隣接する空きブロックを結合してフラグメンテーションを削減
- **8バイトアライメント**: メモリアクセスの効率化
- **ブロックヘッダー**: 各ブロックにメタデータを保持（サイズ、空き状態、次ブロックへのポインタ）

## ビルド方法

```bash
make
```

## 実行方法

```bash
make run
```

または

```bash
./malloc_test
```

## クリーンアップ

```bash
make clean
```

## ファイル構成

- `malloc.h`: ヘッダーファイル
- `malloc.cpp`: メモリアロケータの実装
- `main.cpp`: テストプログラム
- `Makefile`: ビルド設定

## テスト内容

1. 基本的なmalloc/free
2. 複数のメモリ割り当て
3. calloc（ゼロ初期化）
4. realloc（メモリサイズ変更）
5. メモリ解放と再利用

## 注意事項

この実装は教育目的のものです。実運用環境では、標準ライブラリの`malloc`を使用してください。